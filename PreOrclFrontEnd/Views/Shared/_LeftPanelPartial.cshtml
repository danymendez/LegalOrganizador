@using Microsoft.AspNetCore.Authorization
@inject IAuthorizationService AuthorizationService

@{


    bool isAthenticated = false;
    if (User != null)
    {

        isAthenticated = User.Identities
                            .Where(c => c.IsAuthenticated).FirstOrDefault()
                            .Claims.Where(c => c.Value == "Seguridad").FirstOrDefault() != null;


    }

}
@functions {
    public string ValidarPermiso(string nombreAccion)
    {
        bool isAthenticated = false;
        if (User != null)
        {

            isAthenticated = User.Identities
                                .Where(c => c.IsAuthenticated).FirstOrDefault()
                                .Claims.Where(c => c.Value == nombreAccion).FirstOrDefault() != null;


        }

        if (isAthenticated)
            return "";
        return $"style=display:none;";
    }
}


<!-- Left Panel -->
<aside id="left-panel" class="left-panel">
    <nav class="navbar navbar-expand-sm navbar-default">
        <div id="main-menu" class="main-menu collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li class="active">
                    <a asp-area="" asp-controller="Home" asp-action="Index"><i class="menu-icon fa fa-laptop"></i>Inicio</a>
                </li>
                <li class="menu-title">Opciones de sistema</li><!-- /.menu-title -->
                <li class="menu-item-has-children dropdown" @ValidarPermiso("Personas")>
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="menu-icon fa fa-book"></i>Registros</a>
                    <ul class="sub-menu children dropdown-menu">
                        <li><i class="fa fa-puzzle-piece"></i><a asp-area="" asp-controller="SisPerPersonas" asp-action="Index">Clientes/Imputados</a></li>
                    </ul>
                </li>
                <li class="menu-item-has-children dropdown" @(ValidarPermiso("Casos") == ""?ValidarPermiso("Actividades"):ValidarPermiso("Casos"))>
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="menu-icon fa fa-legal"></i>Gestiones Judiciales</a>
                    <ul class="sub-menu children dropdown-menu">
                       
                        <li @ValidarPermiso("Casos")><i class="fa fa-id-badge"></i><a asp-area="" asp-controller="Casos" asp-action="Index">Casos</a></li>
                        <li  @ValidarPermiso("Actividades")><i class="fa fa-book"></i><a asp-area="" asp-controller="Actividades" asp-action="Index">Actividades</a></li>
                    </ul>
                </li>
                <li class="menu-item-has-children dropdown" @ValidarPermiso("Seguridad")>
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="menu-icon fa fa-cogs"></i>Seguridad</a>
                    <ul class="sub-menu children dropdown-menu">
                        <li><i class="fa fa-table"></i><a href="@Url.Action("Index","Roles")">Roles</a></li>
                        <li><i class="fa fa-table"></i><a href="@Url.Action("Index","Usuarios")">Usuarios</a></li>
                    </ul>
                </li>
                <li class="menu-item-has-children dropdown" @ValidarPermiso("Cuadro Mando")>
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="menu-icon fa fa-bar-chart"></i>Cuadro Mando</a>
                    <ul class="sub-menu children dropdown-menu">
                        <li><i class="menu-icon fa fa-th"></i><a href="@Url.Action("ProcesoPorEstado","CuadroMando")">Proceso Por Estado</a></li>
                        <li><i class="menu-icon fa fa-th"></i><a href="@Url.Action("ActividadesPorEstado","CuadroMando")">Actividades Por Estado</a></li>
                        <li><i class="menu-icon fa fa-th"></i><a href="@Url.Action("CargaPorUsuario","CuadroMando")">Carga Por Usuario</a></li>
                    </ul>
                </li>

                @*<li class="menu-title">Icons</li>*@
                <!-- /.menu-title -->
                @*<li class="menu-item-has-children dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="menu-icon fa fa-tasks"></i>Icons</a>
            <ul class="sub-menu children dropdown-menu">
                <li><i class="menu-icon fa fa-fort-awesome"></i><a href="font-fontawesome.html">Font Awesome</a></li>
                <li><i class="menu-icon ti-themify-logo"></i><a href="font-themify.html">Themefy Icons</a></li>
            </ul>
        </li>
        <li>
            <a href="widgets.html"> <i class="menu-icon ti-email"></i>Widgets </a>
        </li>
        <li class="menu-item-has-children dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="menu-icon fa fa-bar-chart"></i>Charts</a>
            <ul class="sub-menu children dropdown-menu">
                <li><i class="menu-icon fa fa-line-chart"></i><a href="charts-chartjs.html">Chart JS</a></li>
                <li><i class="menu-icon fa fa-area-chart"></i><a href="charts-flot.html">Flot Chart</a></li>
                <li><i class="menu-icon fa fa-pie-chart"></i><a href="charts-peity.html">Peity Chart</a></li>
            </ul>
        </li>

        <li class="menu-item-has-children dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="menu-icon fa fa-area-chart"></i>Maps</a>
            <ul class="sub-menu children dropdown-menu">
                <li><i class="menu-icon fa fa-map-o"></i><a href="maps-gmap.html">Google Maps</a></li>
                <li><i class="menu-icon fa fa-street-view"></i><a href="maps-vector.html">Vector Maps</a></li>
            </ul>
        </li>*@
                @*<li class="menu-title">Perfil</li><!-- /.menu-title -->
        <li class="menu-item-has-children dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="menu-icon fa fa-glass"></i>Perfil</a>
            <ul class="sub-menu children dropdown-menu">
                <li><i class="menu-icon fa fa-sign-in"></i><a href="page-login.html">Login</a></li>
                <li><i class="menu-icon fa fa-sign-in"></i><a href="page-register.html">Register</a></li>
                <li><i class="menu-icon fa fa-paper-plane"></i><a href="pages-forget.html">Forget Pass</a></li>
            </ul>
        </li>*@
            </ul>
        </div><!-- /.navbar-collapse -->
    </nav>
</aside>
<!-- /#left-panel -->